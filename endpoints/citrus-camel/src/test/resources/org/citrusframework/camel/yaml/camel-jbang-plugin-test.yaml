name: "CamelJBangTest"
author: "Christoph"
status: "FINAL"
actions:
  - camel:
      jbang:
        plugin:
          add: kubernetes
          args:
            - "--command"
            - "kubernetes"
  - camel:
      jbang:
        plugin:
          kubernetes:
            export:
              integration:
                file: "classpath:org/citrusframework/camel/integration/route.yaml"
              imageRegistry: "registry.minikube"
              imageBuilder: "docker"
              buildProperties:
                - "quarkus.kubernetes.image-pull-policy=Never"
              traits:
                - "container.image-pull-policy=IfNotPresent"
                - "container.image-push=true"

finally:
  - camel:
      jbang:
        plugin:
          kubernetes:
            delete:
              integration:
                name: "test"